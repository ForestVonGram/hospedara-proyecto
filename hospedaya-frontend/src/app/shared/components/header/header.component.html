<header class="header" [ngClass]="{'header--host': variant === 'host'}">
  <div class="container">
    <div class="header-content">
      <!-- Logo -->
      <a [routerLink]="['/']" class="logo">
        <span class="logo-text">HospedaYa</span>
      </a>

      <!-- Navegación principal -->
      <nav class="nav-menu">
        <!-- Links para usuarios NO logueados -->
        @if (!isLoggedIn) {
          <a [routerLink]="['/']" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Inicio</a>
          <a [routerLink]="['/resultados']" routerLinkActive="active">Buscar alojamientos</a>
          <a [routerLink]="['/carreras']" routerLinkActive="active">Carreras</a>
          <a [routerLink]="['/centro-de-ayuda']" routerLinkActive="active">Centro de ayuda</a>
        }

        <!-- Links para HUÉSPEDES -->
        @if (isHuesped) {
          <a [routerLink]="['/dashboard']" routerLinkActive="active">Inicio</a>
          <a [routerLink]="['/resultados']" routerLinkActive="active">Buscar</a>
          <a [routerLink]="['/reservas']" routerLinkActive="active">Mis Reservas</a>
          <a [routerLink]="['/centro-de-ayuda']" routerLinkActive="active">Centro de ayuda</a>
        }

        <!-- Links para ANFITRIONES -->
        @if (isAnfitrion) {
          <a [routerLink]="['/dashboard-anfitrion']" routerLinkActive="active">Dashboard</a>
          <a [routerLink]="['/alojamientos/gestion']" routerLinkActive="active">Mis Alojamientos</a>
          <a [routerLink]="['/reservas-anfitrion']" routerLinkActive="active">Reservas recibidas</a>
          <a [routerLink]="['/centro-de-ayuda']" routerLinkActive="active">Centro de ayuda</a>
          <a [routerLink]="['/alojamientos/nuevo']" routerLinkActive="active" class="btn-create">+ Crear alojamiento</a>
        }

        <!-- Links para ADMINISTRADORES -->
        @if (isAdmin) {
          <a [routerLink]="['/admin']" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Panel admin</a>
          <a [routerLink]="['/admin/usuarios']" routerLinkActive="active">Usuarios</a>
          <a [routerLink]="['/admin/alojamientos']" routerLinkActive="active">Alojamientos</a>
          <a [routerLink]="['/admin/reservas']" routerLinkActive="active">Reservas</a>
          <a [routerLink]="['/admin/noticias']" routerLinkActive="active">Noticias</a>
          <a [routerLink]="['/centro-de-ayuda']" routerLinkActive="active">Centro de ayuda</a>
        }
      </nav>

      <!-- Botones de acción -->
      <div class="header-actions">
        @if (!isLoggedIn) {
          <!-- Usuario NO logueado -->
          <a [routerLink]="['/login']" class="btn btn-secondary">Iniciar Sesión</a>
          <a [routerLink]="['/register']" class="btn btn-primary">Registrarse</a>
        } @else {
          <!-- Usuario logueado - Menú de perfil -->
          <div class="user-menu">
            <button class="user-avatar" (click)="toggleMenu()">
              @if (avatarUrl()) {
                <img [src]="avatarUrl()" [alt]="user?.nombre" />
              } @else {
                <div class="avatar-initials">{{ getInitials() }}</div>
              }
            </button>

            @if (showMenu) {
              <div class="dropdown-menu">
                <div class="user-info">
                  <p class="user-name">{{ user?.nombre }}</p>
                  <p class="user-email">{{ user?.email }}</p>
                  <span class="user-role">
                    {{ isAdmin ? 'Administrador' : (isAnfitrion ? 'Anfitrión' : 'Huésped') }}
                  </span>
                </div>
                <div class="menu-divider"></div>
                <a [routerLink]="['/profile-setup']" class="menu-item">
                  <span>Mi Perfil</span>
                </a>
                @if (isAnfitrion) {
                  <a [routerLink]="['/alojamientos/gestion']" class="menu-item">
                    <span>Gestionar Alojamientos</span>
                  </a>
                  <a [routerLink]="['/reservas-anfitrion']" class="menu-item">
                    <span>Reservas recibidas</span>
                  </a>
                }
                @if (isAdmin) {
                  <a [routerLink]="['/admin']" class="menu-item">
                    <span>Panel de administración</span>
                  </a>
                }
                @if (isHuesped) {
                  <a [routerLink]="['/reservas']" class="menu-item">
                    <span>Mis Reservas</span>
                  </a>
                }
                <div class="menu-divider"></div>
                <button (click)="logout()" class="menu-item logout">
                  <span>Cerrar Sesión</span>
                </button>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>
</header>
