<div class="dashboard">
  <header class="topbar">
    <div class="brand">HospedaYa</div>
    <div class="menu">
      <a routerLink="/login">Iniciar sesión</a>
      <a routerLink="/register">Registrarse</a>
      <a *ngIf="user" (click)="logout()">Cerrar sesión</a>
    </div>
  </header>

  <section class="welcome">
    <div class="search">
      <div>
        <label>Destino</label>
        <input placeholder="¿A dónde vas?" [(ngModel)]="destino" (ngModelChange)="aplicarFiltros()" />
      </div>
      <div>
        <label>Check-in</label>
        <input type="date" [(ngModel)]="checkin" />
      </div>
      <div>
        <label>Check-out</label>
        <input type="date" [(ngModel)]="checkout" />
      </div>
      <div>
        <label>Huéspedes</label>
        <select [(ngModel)]="huespedes">
          <option *ngFor="let n of [1,2,3,4,5,6,7,8]" [value]="n">{{n}}</option>
        </select>
      </div>
      <button (click)="aplicarFiltros()">Buscar Alojamientos</button>
    </div>
  </section>

  <div class="content">
    <aside class="filters">
      <h3>Filtros</h3>
      <label>Rango de precio (max)</label>
      <input type="range" min="0" max="1000" step="10" [(ngModel)]="precioMax" (change)="aplicarFiltros()" />
      <div class="price">{{precioMax || 'Sin límite'}}€</div>
    </aside>

    <section class="destacados">
      <h3>{{ filtrados.length }} alojamientos encontrados</h3>
      <div class="grid">
        <article class="card" *ngFor="let a of filtrados">
          <a [routerLink]="['/alojamientos', a.id]">
            <img [src]="resolverImg(a)" alt="Imagen del alojamiento" />
          </a>
          <div class="info">
            <h4><a [routerLink]="['/alojamientos', a.id]">{{ a.titulo }}</a></h4>
            <p>{{ a.direccion }}</p>
            <div class="meta">
              <span>${{ a.precioPorNoche }}/noche</span>
              <span>★ 4.7</span>
            </div>
            <div class="actions">
              <a class="btn" [routerLink]="['/alojamientos', a.id]">Ver detalles</a>
              <button class="btn" [routerLink]="['/alojamientos', a.id, 'reservar']">Reservar</button>
            </div>
          </div>
        </article>
      </div>
    </section>
  </div>
</div>
