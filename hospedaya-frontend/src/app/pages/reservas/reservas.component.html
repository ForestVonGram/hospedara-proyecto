<div class="dashboard">
  <header class="topbar">
    <div class="brand">HospedaYa</div>
    <div class="menu">
      <ng-container *ngIf="user; else authLinks">
        <div class="user-menu" [class.open]="showMenu">
          <div class="avatar" (click)="toggleMenu()" [style.background-image]="avatar() ? 'url(' + (avatar() + '?v=' + (user?.fotoPerfilUrl ? '' : '')) + ')' : 'none'"></div>
          <nav class="dropdown" *ngIf="showMenu">
            <a routerLink="/">Inicio</a>
            <a class="active" routerLink="/reservas">Mis Reservas</a>
            <a>Comentarios</a>
            <a routerLink="/perfil">Configuración</a>
            <hr />
            <a (click)="logout()">Cerrar sesión</a>
          </nav>
        </div>
      </ng-container>
      <ng-template #authLinks>
        <a routerLink="/login">Iniciar sesión</a>
        <a routerLink="/register">Registrarse</a>
      </ng-template>
    </div>
  </header>

  <section class="reservas" *ngIf="reservas.length; else vacio">
    <article class="reserva" *ngFor="let r of reservas">
      <img [src]="resolverImg(r.alojamiento)" />
      <div class="info">
        <h3>{{ r.alojamiento?.titulo }}</h3>
        <p>{{ r.alojamiento?.direccion }}</p>
        <div class="dates">
          <span>Check-in: {{ r.fechaInicio }}</span>
          <span>Check-out: {{ r.fechaFin }}</span>
        </div>
        <div class="meta">
          <span>${{ r.alojamiento?.precioPorNoche }}/noche</span>
          <button>Ver detalles</button>
        </div>
      </div>
    </article>
  </section>

  <ng-template #vacio>
    <div class="empty">Aún no tienes reservas.</div>
  </ng-template>
</div>