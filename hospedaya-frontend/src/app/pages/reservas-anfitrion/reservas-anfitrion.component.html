<app-header></app-header>

<main class="container">
  <h2>Reservas Recibidas</h2>
  <p class="subtitle">Gestiona las reservas de tus propiedades</p>

  <div *ngIf="cargando" class="loading">Cargando reservas...</div>
  <div *ngIf="!cargando && error" class="error">{{ error }}</div>
  <div *ngIf="!cargando && !error && !reservas.length" class="empty">AÃºn no tienes reservas.</div>

  <section class="reserva-card" *ngFor="let r of reservas">
    <div class="reserva-info">
      <h3>{{ r.alojamiento?.titulo || ('Alojamiento #' + r.alojamientoId) }}</h3>
      <p class="fecha">ðŸ“… {{ r.fechaInicio }} â€“ {{ r.fechaFin }}</p>
      <p class="huesped" *ngIf="r.huesped">
        ðŸ‘¤ {{ r.huesped.nombre }} Â· {{ r.huesped.email }}<span *ngIf="r.huesped.telefono"> Â· {{ r.huesped.telefono }}</span>
      </p>
      <p class="huesped" *ngIf="!r.huesped">
        ðŸ‘¤ HuÃ©sped #{{ r.usuarioId }}
      </p>
    </div>
    <div class="estado">
      <span [ngClass]="estadoClase(estadoVisual(r))">{{ estadoVisual(r) }}</span>
      <button class="btn" [routerLink]="['/reservas-anfitrion', r.id]">â„¹ Ver detalles</button>
      <button class="btn confirmar" (click)="confirmar(r)" [disabled]="(r.estado || '').toUpperCase() !== 'PENDIENTE'">âœ” Confirmar</button>
      <button class="btn rechazar" (click)="cancelar(r)" [disabled]="(r.estado || '').toUpperCase() === 'CANCELADA'">âœ– Rechazar</button>
    </div>
  </section>
</main>
