<div class="dashboard">
  <header class="topbar">
    <div class="brand">HospedaYa</div>
    <div class="menu">
      <ng-container *ngIf="user; else authLinks">
        <div class="user-menu" [class.open]="showMenu">
          <div class="avatar" (click)="toggleMenu()" [style.background-image]="avatarUrl() ? 'url(' + (avatarUrl() + '?v=' + (user?.fotoPerfilUrl ? '' : '')) + ')' : 'none'"></div>
          <nav class="dropdown" *ngIf="showMenu">
            <a routerLink="/">Inicio</a>
            <a routerLink="/reservas">Mis Reservas</a>
            <a>Comentarios</a>
            <a routerLink="/perfil">Configuración</a>
            <hr />
            <a (click)="logout()">Cerrar sesión</a>
          </nav>
        </div>
      </ng-container>
      <ng-template #authLinks>
        <a routerLink="/login">Iniciar sesión</a>
        <a routerLink="/register">Registrarse</a>
      </ng-template>
    </div>
  </header>

  <section class="welcome">
    <h2>Bienvenido, {{ user?.nombre || 'Usuario' }}</h2>
    <p>Encuentra tu próximo hospedaje ideal</p>

    <div class="search">
      <input placeholder="¿A dónde vas?" [(ngModel)]="destino" />
      <input type="date" [(ngModel)]="checkin" />
      <input type="date" [(ngModel)]="checkout" />
      <select [(ngModel)]="huespedes">
        <option *ngFor="let n of [1,2,3,4,5,6,7,8]" [value]="n">{{n}}</option>
      </select>
      <button (click)="buscar()">Buscar</button>
    </div>
  </section>

  <section class="destacados">
    <h3>Alojamientos Destacados</h3>
    <div class="grid">
      <article class="card" *ngFor="let a of destacados">
        <img [src]="a.img" alt="" />
        <div class="info">
          <h4>{{ a.titulo }}</h4>
          <p>{{ a.ciudad }}</p>
          <div class="meta">
            <span>${{ a.precio }}/noche</span>
            <span>★ {{ a.rating }}</span>
          </div>
          <button>Reservar</button>
        </div>
      </article>
    </div>
  </section>
</div>
